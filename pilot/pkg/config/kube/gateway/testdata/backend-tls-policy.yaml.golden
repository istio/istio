apiVersion: networking.istio.io/v1
kind: Gateway
metadata:
  annotations:
    internal.istio.io/gateway-semantics: gateway
    internal.istio.io/gateway-service: istio-ingressgateway.istio-system.svc.domain.suffix
    internal.istio.io/parents: Gateway/gateway/default.istio-system
    internal.istio.io/service-account-name: ""
  name: gateway~istio-autogenerated-k8s-gateway~default
  namespace: istio-system
spec:
  servers:
  - hosts:
    - istio-system/*.domain.example
    port:
      name: default
      number: 80
      protocol: HTTP
---
apiVersion: networking.istio.io/v1
kind: VirtualService
metadata:
  annotations:
    internal.istio.io/parents: HTTPRoute/http.istio-system
    internal.istio.io/route-semantics: gateway
  name: istio-system~gateway~istio-autogenerated-k8s-gateway~default~*
  namespace: istio-system
spec:
  gateways:
  - istio-system/gateway~istio-autogenerated-k8s-gateway~default
  hosts:
  - '*'
  http:
  - name: istio-system.http.0
    route:
    - destination: {}
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  annotations:
    internal.istio.io/parents: BackendTLSPolicy/default.tls-upstream-echo-https-merged-rules
  name: echo-https~istio-autogenerated-k8s-gateway
  namespace: default
spec:
  host: echo-https.default.svc.domain.suffix
  trafficPolicy:
    portLevelSettings:
    - port:
        number: 443
      tls:
        credentialName: configmap://default/auth-cert
        mode: SIMPLE
        sni: auth.example.com
    tls:
      credentialName: configmap://default/auth-cert
      mode: SIMPLE
      sni: auth.example.com
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  annotations:
    internal.istio.io/parents: BackendTLSPolicy/default.tls-upstream-echo
  name: echo~istio-autogenerated-k8s-gateway
  namespace: default
spec:
  host: echo.default.svc.domain.suffix
  trafficPolicy:
    tls:
      credentialName: configmap://default/auth-cert
      mode: SIMPLE
      sni: auth.example.com
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  annotations:
    internal.istio.io/parents: BackendTLSPolicy/default.tls-external-service-https
  name: external-service~external-example-com~istio-autogenerated-k8s-gateway
  namespace: default
spec:
  host: external.example.com
  trafficPolicy:
    portLevelSettings:
    - port:
        number: 443
      tls:
        mode: SIMPLE
        sni: external.example.com
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  annotations:
    internal.istio.io/parents: BackendTLSPolicy/default.bad-configmap-type
  name: foo-svc~istio-autogenerated-k8s-gateway
  namespace: default
spec:
  host: foo-svc.default.svc.domain.suffix
  trafficPolicy:
    tls:
      credentialName: invalid://
      mode: SIMPLE
      sni: auth.example.com
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  annotations:
    internal.istio.io/parents: BackendTLSPolicy/default.malformed-configmap
  name: httpbin-other~istio-autogenerated-k8s-gateway
  namespace: default
spec:
  host: httpbin-other.default.svc.domain.suffix
  trafficPolicy:
    tls:
      credentialName: invalid://
      mode: SIMPLE
      sni: auth.example.com
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  annotations:
    internal.istio.io/parents: BackendTLSPolicy/default.unknown-configmap
  name: httpbin-second~istio-autogenerated-k8s-gateway
  namespace: default
spec:
  host: httpbin-second.default.svc.domain.suffix
  trafficPolicy:
    tls:
      credentialName: invalid://
      mode: SIMPLE
      sni: auth.example.com
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  annotations:
    internal.istio.io/parents: BackendTLSPolicy/default.existing-status
  name: httpbin~istio-autogenerated-k8s-gateway
  namespace: default
spec:
  host: httpbin.default.svc.domain.suffix
  trafficPolicy:
    tls:
      credentialName: configmap://default/auth-cert
      mode: SIMPLE
      sni: auth.example.com
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  annotations:
    internal.istio.io/parents: BackendTLSPolicy/default.multi-host-service-entry,BackendTLSPolicy/default.multi-host-service-entry-section-name
  name: multi-host-service~api-example-com~istio-autogenerated-k8s-gateway
  namespace: default
spec:
  host: api.example.com
  trafficPolicy:
    portLevelSettings:
    - port:
        number: 8443
      tls:
        credentialName: configmap://default/auth-cert
        mode: SIMPLE
        sni: api.example.com
    tls:
      mode: SIMPLE
      sni: cdn.example.com
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  annotations:
    internal.istio.io/parents: BackendTLSPolicy/default.multi-host-service-entry,BackendTLSPolicy/default.multi-host-service-entry-section-name
  name: multi-host-service~cdn-example-com~istio-autogenerated-k8s-gateway
  namespace: default
spec:
  host: cdn.example.com
  trafficPolicy:
    portLevelSettings:
    - port:
        number: 8443
      tls:
        credentialName: configmap://default/auth-cert
        mode: SIMPLE
        sni: api.example.com
    tls:
      mode: SIMPLE
      sni: cdn.example.com
---
