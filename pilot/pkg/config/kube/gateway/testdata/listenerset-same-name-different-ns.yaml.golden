apiVersion: networking.istio.io/v1
kind: Gateway
metadata:
  annotations:
    internal.istio.io/gateway-semantics: gateway
    internal.istio.io/gateway-service: istio-ingressgateway.istio-system.svc.domain.suffix
    internal.istio.io/parents: Gateway/parent-gateway/default.istio-system
    internal.istio.io/service-account-name: ""
  name: parent-gateway~istio-autogenerated-k8s-gateway~default
  namespace: istio-system
spec:
  servers:
  - hosts:
    - istio-system/*.example.com
    port:
      name: default
      number: 80
      protocol: HTTP
---
apiVersion: networking.istio.io/v1
kind: Gateway
metadata:
  annotations:
    internal.istio.io/gateway-semantics: gateway
    internal.istio.io/gateway-service: istio-ingressgateway.istio-system.svc.domain.suffix
    internal.istio.io/parent-namespace: istio-system
    internal.istio.io/parents: XListenerSet/same-name-http/http.ns1
    internal.istio.io/service-account-name: parent-gateway-istio
  name: same-name-http~istio-autogenerated-k8s-gateway~http
  namespace: ns1
spec:
  servers:
  - hosts:
    - ns1/first.example.com
    port:
      name: default
      number: 80
      protocol: HTTP
---
apiVersion: networking.istio.io/v1
kind: Gateway
metadata:
  annotations:
    internal.istio.io/gateway-semantics: gateway
    internal.istio.io/gateway-service: istio-ingressgateway.istio-system.svc.domain.suffix
    internal.istio.io/parent-namespace: istio-system
    internal.istio.io/parents: XListenerSet/same-name-http/http.ns2
    internal.istio.io/service-account-name: parent-gateway-istio
  name: same-name-http~istio-autogenerated-k8s-gateway~http
  namespace: ns2
spec:
  servers:
  - hosts:
    - ns2/second.example.com
    port:
      name: default
      number: 80
      protocol: HTTP
---
apiVersion: networking.istio.io/v1
kind: VirtualService
metadata:
  annotations:
    internal.istio.io/parents: HTTPRoute/bind-ns1.ns1
    internal.istio.io/route-semantics: gateway
  name: ns1~same-name-http~istio-autogenerated-k8s-gateway~http~*
  namespace: ns1
spec:
  gateways:
  - ns1/same-name-http~istio-autogenerated-k8s-gateway~http
  hosts:
  - '*'
  http:
  - match:
    - uri:
        prefix: /ns1
    name: ns1.bind-ns1.0
    route:
    - destination:
        host: httpbin.ns1.svc.domain.suffix
        port:
          number: 80
---
apiVersion: networking.istio.io/v1
kind: VirtualService
metadata:
  annotations:
    internal.istio.io/parents: HTTPRoute/bind-ns2.ns2
    internal.istio.io/route-semantics: gateway
  name: ns2~same-name-http~istio-autogenerated-k8s-gateway~http~*
  namespace: ns2
spec:
  gateways:
  - ns2/same-name-http~istio-autogenerated-k8s-gateway~http
  hosts:
  - '*'
  http:
  - match:
    - uri:
        prefix: /ns2
    name: ns2.bind-ns2.0
    route:
    - destination:
        host: httpbin.ns2.svc.domain.suffix
        port:
          number: 80
---
